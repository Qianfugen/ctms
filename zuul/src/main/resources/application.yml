#客户端端口
server:
  port: 8088
#连接注册中心的配置
eureka:
  client:
    service-url:
      defaultZone: http://localhost:8050/eureka/

spring:
  #该服务在注册中心的名称
  application:
    name: zuul-server
  #通过redis配置session共享
  redis:
    host: localhost
    port: 6379
#自定义路径映射
zuul:
  routes:
    mybank-server: /gateway/mybank/**
#    point-server: /gateway/point/**
  #过滤,不能以服务名访问
  ignored-patterns: /*-server/**
  host:
    connect-timeout-millis: 10000 #HTTP连接超时要比Hystrix的大
    socket-timeout-millis: 50000   #socket超时
    #不让zuul把cookie过滤掉
  sensitive-headers: "*"
  # 限流设置
  ratelimit:
    key-prefix: springcloud-goods #按粒度拆分的临时变量key前缀
    enabled: true #启用开关
    repository: REDIS #key存储，默认是IN_MEMORY本地内存，此外还有多种形式
    behind-proxy: true #表示代理之后
    default-policy: #全局限流策略，可单独细化到服务粒度
      limit: 2 #在一个单位时间窗口的请求数量
      quota: 1 #在一个单位时间窗口的请求时间限制
      refresh-interval: 3 #单位时间窗口
      type:
        url #可指定url粒度
    policies: #针对于不同服务的限流策略(貌似无效)
      point-service: #针对于积分服务
        limit: 100
        quota: 5
        refresh-interval: 10
        type: url
